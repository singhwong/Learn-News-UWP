<Page
    x:Class="The_Paper.Views.NewsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:The_Paper.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local2="using:The_Paper.Models"
    xmlns:local3="using:The_Paper.Controls"
    xmlns:local4="using:The_Paper.Converters"
    mc:Ignorable="d">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="buttonStyle.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <local4:BoolToVisibilityConverter x:Key="BTVC" />
            <local4:BoolInvertConverter x:Key="BIC" />
        </ResourceDictionary>
    </Page.Resources>
    <Grid x:ConnectionId='1' Name="Grid"
          RequestedTheme="Dark">
        <Grid.RowDefinitions>
            <RowDefinition x:ConnectionId='2' x:Name="row_1"
                           Height="30"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:ConnectionId='3' x:Name="colume_1"
                              Width="*"/>
            <ColumnDefinition x:ConnectionId='4' x:Name="colume_2"
                              Width="0"/>
        </Grid.ColumnDefinitions>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:ConnectionId='5' x:Name="VisualStateGroup">
                <VisualState x:ConnectionId='6' x:Name="Narrow">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                        <StateTrigger x:ConnectionId='8' IsActive="{Binding IsOpen}" 
                                      x:Name="Trigger" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="topNewsPanel.Height" Value="126" />
                        <Setter Target="topNewsImage.(RelativePanel.AlignLeftWithPanel)" Value="True" />
                        <Setter Target="topNewsHL.FontSize" Value="13" />
                        <Setter Target="topNewsHL.(RelativePanel.RightOf)" Value="topNewsImage" />
                        <Setter Target="topNewsHL.(RelativePanel.AlignTopWithPanel)" Value="True" />
                        <Setter Target="topNewsMC.FontSize" Value="9" />
                        <Setter Target="topNewsMC.(RelativePanel.Below)" Value="topNewsHL" />
                        <Setter Target="topNewsMC.(RelativePanel.RightOf)" Value="topNewsImage" />
                        <Setter Target="topNewsMC.(RelativePanel.Above)" Value="topNewsTag" />
                        <Setter Target="topNewsTag.FontSize" Value="7" />
                        <Setter Target="topNewsTag.(RelativePanel.RightOf)" Value="topNewsImage" />
                        <Setter Target="topNewsTag.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                        <Setter Target="topNewsSplit.FontSize" Value="7" />
                        <Setter Target="topNewsSplit.(RelativePanel.RightOf)" Value="topNewsTag" />
                        <Setter Target="topNewsSplit.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                        <Setter Target="topNewsTime.FontSize" Value="7" />
                        <Setter Target="topNewsTime.(RelativePanel.RightOf)" Value="topNewsSplit" />
                        <Setter Target="topNewsTime.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                        <!--<Setter Target="topNewsIcon.FontSize" Value="10" />
                        <Setter Target="topNewsIcon.(RelativePanel.LeftOf)" Value="topNewsCT" />
                        <Setter Target="topNewsIcon.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                        <Setter Target="topNewsCT.FontSize" Value="10" />
                        <Setter Target="topNewsCT.(RelativePanel.AlignRightWithPanel)" Value="True" />
                        <Setter Target="topNewsCT.(RelativePanel.AlignBottomWithPanel)" Value="True" />-->
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:ConnectionId='7' x:Name="Wide">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="600"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="topNewsPanel.Height" Value="300" />
                        <Setter Target="topNewsImage.(RelativePanel.AlignLeftWithPanel)" Value="True" />
                        <Setter Target="topNewsHL.FontSize" Value="22" />
                        <Setter Target="topNewsHL.(RelativePanel.RightOf)" Value="topNewsImage" />
                        <Setter Target="topNewsHL.(RelativePanel.AlignTopWithPanel)" Value="True" />
                        <Setter Target="topNewsMC.FontSize" Value="16" />
                        <Setter Target="topNewsMC.(RelativePanel.Below)" Value="topNewsHL" />
                        <Setter Target="topNewsMC.(RelativePanel.RightOf)" Value="topNewsImage" />
                        <Setter Target="topNewsMC.(RelativePanel.Above)" Value="topNewsTag" />
                        <Setter Target="topNewsTag.FontSize" Value="12" />
                        <Setter Target="topNewsTag.(RelativePanel.RightOf)" Value="topNewsImage" />
                        <Setter Target="topNewsTag.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                        <Setter Target="topNewsSplit.FontSize" Value="12" />
                        <Setter Target="topNewsSplit.(RelativePanel.RightOf)" Value="topNewsTag" />
                        <Setter Target="topNewsSplit.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                        <Setter Target="topNewsTime.FontSize" Value="12" />
                        <Setter Target="topNewsTime.(RelativePanel.RightOf)" Value="topNewsSplit" />
                        <Setter Target="topNewsTime.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                        <!--<Setter Target="topNewsIcon.FontSize" Value="12" />
                        <Setter Target="topNewsIcon.(RelativePanel.LeftOf)" Value="topNewsCT" />
                        <Setter Target="topNewsIcon.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                        <Setter Target="topNewsCT.FontSize" Value="12" />
                        <Setter Target="topNewsCT.(RelativePanel.AlignRightWithPanel)" Value="True" />
                        <Setter Target="topNewsCT.(RelativePanel.AlignBottomWithPanel)" Value="True" />-->
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Button x:ConnectionId='9' Name="back_button"
                Content="关闭"
                Grid.Column="1"
                HorizontalAlignment="Left"
                FontWeight="Thin"
                Visibility="Collapsed"
                Style="{StaticResource CustomButtonStyle}"
                                         />
        <local3:TabView x:ConnectionId='10' x:Name="TabView"
                        Grid.Row="1"
                        Background="Black"
                                                     
                        TabNameList="{Binding TabNameList}">
            <local3:TabView.View>
                <ScrollViewer x:ConnectionId='12' Name="scrollViewer" 
                                                                    
                              Background="Black">
                    <RelativePanel>
                        <GridViewItem x:ConnectionId='13' Name="topNews"
                                      Style="{StaticResource NewsListItemStyle}"
                                      Background="Black"
                                      Visibility="{Binding Path=HasTopNews,Converter={StaticResource BTVC}}"
                                                             >
                            <RelativePanel x:ConnectionId='21' Name="topNewsPanel"
                                           Background="Black">
                                <Image x:ConnectionId='22' Name="topNewsImage" 
                                       Source="{Binding TopNews.image}"/>
                                <TextBlock x:ConnectionId='23' Name="topNewsHL"
                                           TextTrimming="WordEllipsis"
                                           Margin="10,10,10,10"
                                           FontWeight="Bold"
                                           TextWrapping="WrapWholeWords"
                                           Text="{Binding TopNews.headLine}" />
                                <TextBlock x:ConnectionId='24' Name="topNewsMC" 
                                           Margin="10,10,10,10"
                                           TextWrapping="WrapWholeWords"
                                           TextTrimming="WordEllipsis"
                                           Text="{Binding TopNews.mainContent}"/>
                                <TextBlock x:ConnectionId='25' Name="topNewsTag" 
                                           Margin="5,10,5,10"
                                           Text="{Binding TopNews.tag}" />
                                <TextBlock x:ConnectionId='26' Name="topNewsSplit" 
                                           Margin="5,9,5,10" 
                                           Text="|" />
                                <TextBlock x:ConnectionId='27' Name="topNewsTime" 
                                           Margin="5,10,5,10" 
                                           Text="{Binding TopNews.time}" />
                                <!--<FontIcon FontFamily="Segoe MDL2 Assets"
                                          Margin="0,5,0,10"
                                          Name="topNewsIcon"
                                          Glyph="&#xE206;" />
                                <TextBlock Name="topNewsCT"
                                        Margin="5,10,5,10"
                                        Text="{Binding TopNews.commentCount}" />-->
                            </RelativePanel>
                        </GridViewItem>
                        <GridView x:ConnectionId='14' Name="NewsCards"
                                  ItemsSource="{Binding NewsList}"
                                  Background="Black"
                                                                               
                                  RelativePanel.Below="topNews">
                            <GridView.ItemTemplate>
                                <DataTemplate                         >
                                    <!--<UserControl>-->
                                    <Grid x:ConnectionId='15' Name="NewsCard"     
                                          Height="315"
                                          Width="220">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>
                                        <!--<VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup>
                                                    <VisualState x:Name="CardWide">
                                                        <VisualState.StateTriggers>
                                                            <AdaptiveTrigger MinWindowWidth="600" />
                                                        </VisualState.StateTriggers>
                                                        <VisualState.Setters>
                                                            <Setter Target="NewsCard.Width" Value="220" />
                                                            <Setter Target="image.(RelativePanel.AlignTopWithPanel)" Value="True" />
                                                            <Setter Target="headLine.(RelativePanel.Below)" Value="image" />
                                                            <Setter Target="headLine.FontSize" Value="18" />
                                                            <Setter Target="mainContent.(RelativePanel.Below)" Value="headLine" />
                                                            <Setter Target="mainContent.FontSize" Value="12"/>
                                                            <Setter Target="tag.(RelativePanel.Below)" Value="mainContent" />
                                                            <Setter Target="tag.(RelativePanel.AlignLeftWithPanel)" Value="True" />
                                                            <Setter Target="tag.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                            <Setter Target="tag.(RelativePanel.Below)" Value="mainContent" />
                                                            <Setter Target="tag.FontSize" Value="10" />
                                                            <Setter Target="split.(RelativePanel.Below)" Value="mainContent" />
                                                            <Setter Target="split.(RelativePanel.RightOf)" Value="tag" />
                                                            <Setter Target="split.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                            <Setter Target="split.FontSize" Value="10" />
                                                            <Setter Target="time.(RelativePanel.Below)" Value="mainContent" />
                                                            <Setter Target="time.(RelativePanel.RightOf)" Value="split" />
                                                            <Setter Target="time.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                            <Setter Target="time.FontSize" Value="10" />
                                                            <Setter Target="icon.(RelativePanel.Below)" Value="mainContent" />
                                                            <Setter Target="icon.(RelativePanel.LeftOf)" Value="commentCount" />
                                                            <Setter Target="icon.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                            <Setter Target="icon.Margin" Value="0,6,0,4" />
                                                            <Setter Target="icon.FontSize" Value="10" />
                                                            <Setter Target="commentCount.(RelativePanel.Below)" Value="mainContent" />
                                                            <Setter Target="commentCount.(RelativePanel.AlignRightWithPanel)" Value="True" />
                                                            <Setter Target="commentCount.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                            <Setter Target="commentCount.FontSize" Value="10" />
                                                            </VisualState.Setters>
                                                    </VisualState>
                                                    <VisualState x:Name="CardNarrow">
                                                        <VisualState.StateTriggers>
                                                            <AdaptiveTrigger MinWindowWidth="0" />
                                                            <StateTrigger IsActive="{Binding Path=IsActive,ElementName=Trigger}" />
                                                        </VisualState.StateTriggers>
                                                        <VisualState.Setters>
                                                            <Setter Target="NewsCard.Height" Value="150" />
                                                            <Setter Target="image.(RelativePanel.AlignLeftWithPanel)" Value="True" />
                                                            <Setter Target="headLine.FontSize" Value="14" />
                                                            <Setter Target="headLine.(RelativePanel.RightOf)" Value="image" />
                                                            <Setter Target="headLine.(RelativePanel.AlignTopWithPanel)" Value="True" />
                                                            <Setter Target="mainContent.FontSize" Value="12" />
                                                            <Setter Target="mainContent.(RelativePanel.Below)" Value="headLine" />
                                                            <Setter Target="mainContent.(RelativePanel.RightOf)" Value="image" />
                                                            <Setter Target="mainContent.(RelativePanel.Above)" Value="tag" />
                                                            <Setter Target="tag.FontSize" Value="10" />
                                                            <Setter Target="tag.(RelativePanel.RightOf)" Value="image" />
                                                            <Setter Target="tag.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                            <Setter Target="split.FontSize" Value="10" />
                                                            <Setter Target="split.(RelativePanel.RightOf)" Value="tag" />
                                                            <Setter Target="split.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                            <Setter Target="time.FontSize" Value="10" />
                                                            <Setter Target="time.(RelativePanel.RightOf)" Value="split" />
                                                            <Setter Target="time.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                            <Setter Target="icon.FontSize" Value="10" />
                                                            <Setter Target="icon.(RelativePanel.LeftOf)" Value="commentCount" />
                                                            <Setter Target="icon.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                            <Setter Target="icon.Margin" Value="0,5,0,10" />
                                                            <Setter Target="commentCount.FontSize" Value="10" />
                                                            <Setter Target="commentCount.(RelativePanel.AlignRightWithPanel)" Value="True" />
                                                            <Setter Target="commentCount.(RelativePanel.AlignBottomWithPanel)" Value="True" />
                                                        </VisualState.Setters>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>-->
                                        <Image x:ConnectionId='16'                         
                                               Name="image"
                                               Height="135"
                                               Width="220"/>
                                        <TextBlock x:ConnectionId='17'                          
                                                   Name="headLine"
                                                   FontWeight="Bold" 
                                                   TextWrapping="WrapWholeWords" 
                                                   Width="210"
                                                   Grid.Row="1"/>
                                        <TextBlock x:ConnectionId='18'                             
                                                   Width="210"
                                                   Height="100"
                                                   Grid.Row="2"
                                                   FontSize="13"
                                                   Name="mainContent" 
                                                   Margin="2,0,0,0"
                                                   TextWrapping="WrapWholeWords" 
                                                   TextTrimming="WordEllipsis"/>
                                        <!--<FontIcon FontFamily="Segoe MDL2 Assets" Name="icon"
                                                        Glyph="&#xE206;"
                                                        Visibility="Visible"/>
                                            <TextBlock Text="{x:Bind commentCount}"
                                                       Name="commentCount"
                                                        Margin="5,10,5,10"
                                                       Visibility="Visible"/>-->
                                        <StackPanel Orientation="Horizontal"
                                                    Grid.Row="3"
                                                    VerticalAlignment="Bottom">
                                            <TextBlock x:ConnectionId='19'                     
                                                       Name="tag" 
                                                       FontSize="12"/>
                                            <TextBlock Name="split" 
                                                       Text="|" 
                                                       Margin="5,0,5,0"
                                                       FontSize="12"/>
                                            <TextBlock x:ConnectionId='20'                     
                                                       Name="time"
                                                       FontSize="12"/>
                                        </StackPanel>
                                    </Grid>
                                    <!--</UserControl>-->
                                </DataTemplate>
                            </GridView.ItemTemplate>
                        </GridView>
                        <TextBlock FontSize="14" 
                                   RelativePanel.AlignHorizontalCenterWithPanel="True"
                                   RelativePanel.Below="NewsCards"
                                   Text="{Binding LoadStatus}" 
                                   Margin="0,0,0,10"
                                   Foreground="Gray"/>
                    </RelativePanel>
                </ScrollViewer>
            </local3:TabView.View>
        </local3:TabView>
        <Frame x:ConnectionId='11' Name="NewsDetail"
               Grid.Row="1"
               Grid.Column="1"
               Visibility="Collapsed"/>
        <ProgressRing Width="75"
                      Height="75" 
                      IsActive="{Binding Path=Loaded,Converter={StaticResource BIC}}" />
    </Grid>
</Page>

